var views=[],sheets=[],keywords="",filters=[],noMatchMsg=null,viewSelector=".sheet-list",itemSelector=".sheet-item";function searchSheets(e){keywords=e;var t=e.toLowerCase().split(" "),n=!1;sheets.forEach((function(e){var o=e.dataset.ttl.concat(" ",e.dataset.art);n=t.every((function(e){return o.includes(e)})),e.style.display=n?"":"none"})),handleNoMatch()}function updateFilters(){filters=[],document.querySelectorAll('[name^="filter-"]:checked').forEach((function(e){"all"!==e.value&&filters.push(e.value)})),filterSheets()}function filterSheets(){var e=!1;sheets.forEach((function(t){e=filters.every((function(e){return t.dataset.f.includes(e)})),t.classList.toggle("filtered",!e)})),handleNoMatch()}function sortSheets(){var e,t,n=document.querySelector('[name="sort"]:checked').value;views.forEach((function(o){for(var r,c,a=!0,l=!1;a;){for(c=o.querySelectorAll(itemSelector),a=!1,r=0;r<c.length-1&&(l=!1,e=c[r].dataset[n].replace(/^the /,""),t=c[r+1].dataset[n].replace(/^the /,""),!(l="pd"===n?e<t:e>t));r++);l&&(c[r].parentNode.insertBefore(c[r+1],c[r]),a=!0)}sheets=document.querySelectorAll(itemSelector)}))}function handleNoMatch(){var e=Array.from(sheets).some((function(e){return null!==e.offsetParent}));noMatchMsg.style.display=e?"none":""}function displayNew(){var e=new Date(Date.now()-6048e5).toISOString().slice(0,10),t=document.createElement("span");t.classList.add("new"),t.innerHTML="NEW",sheets.forEach((function(n){n.dataset.pd>e&&n.querySelector("a").before(t.cloneNode(!0))}))}function switchView(){views.forEach((function(e){e.hidden=!e.hidden}))}document.addEventListener("DOMContentLoaded",(function(){views=document.querySelectorAll(viewSelector),sheets=document.querySelectorAll(itemSelector),noMatchMsg=document.getElementById("nomatch"),displayNew(),document.querySelectorAll('[name^="filter-"]').forEach((function(e){e.addEventListener("change",(function(e){updateFilters()}))})),document.querySelectorAll('[name="sort').forEach((function(e){e.addEventListener("change",(function(e){sortSheets()}))})),document.querySelectorAll('[name="view').forEach((function(e){e.addEventListener("change",(function(e){switchView()}))}))}));