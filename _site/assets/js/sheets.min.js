var sheets=[],keywords="",filters=[],noMatchMsg=null,itemSelector=".sheet-item";function searchSheets(e){keywords=e;var t=e.toLowerCase().split(" "),n=!1;sheets.forEach((function(e){var s=e.dataset.ttl.concat(" ",e.dataset.art);n=t.every((function(e){return s.includes(e)})),e.style.display=n?"":"none"})),handleNoMatch()}function updateFilters(){filters=[],document.querySelectorAll('[name^="filter-"]:checked').forEach((function(e){"all"!==e.value&&filters.push(e.value)})),filterSheets()}function filterSheets(){var e=!1;sheets.forEach((function(t){e=filters.every((function(e){return t.dataset.f.includes(e)})),t.classList.toggle("filtered",!e)})),handleNoMatch()}function sortSheets(){for(var e,t,n,s=document.querySelector('[name="sort"]:checked').value,r=!0,a=!1;r;){for(r=!1,n=0;n<sheets.length-1;n++)if((e=sheets[n].dataset[s].replace(/^the /,""))!==(t=sheets[n+1].dataset[s].replace(/^the /,""))&&(a=e>t,"pd"===s&&(a=!a),a)){sheets[n].parentNode.insertBefore(sheets[n+1],sheets[n]),r=!0;break}sheets=document.querySelectorAll(itemSelector)}}function handleNoMatch(){var e=Array.from(sheets).some((function(e){return null!==e.offsetParent}));noMatchMsg.style.display=e?"none":""}function displayNew(){var e=new Date(Date.now()-6048e5).toISOString().slice(0,10).replace(/-/g,""),t=document.createElement("span");t.classList.add("new"),t.innerHTML="NEW",sheets.forEach((function(n){n.dataset.pd>e&&n.appendChild(t.cloneNode(!0))}))}document.addEventListener("DOMContentLoaded",(function(){sheets=document.querySelectorAll(itemSelector),noMatchMsg=document.getElementById("nomatch"),displayNew(),document.querySelectorAll('[name^="filter-"]').forEach((function(e){e.addEventListener("change",(function(e){updateFilters()}))})),document.querySelectorAll('[name="sort').forEach((function(e){e.addEventListener("change",(function(e){sortSheets()}))}))}));